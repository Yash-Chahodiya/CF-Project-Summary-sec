import{a as b}from"./chunk-XWTN2QSH.js";import{a as v}from"./chunk-7IRRVQBO.js";import{m as p}from"./chunk-JT2VSET4.js";import{a as w,b as _}from"./chunk-LTFFWF27.js";import{c as s}from"./chunk-5TBO732O.js";var o=s(w(),1);var h=s(_(),1),A=({projectId:i,userId:t,compId:l})=>{let[x,g]=(0,o.useState)([]),a=(0,o.useRef)(null);return(0,o.useEffect)(()=>{(async()=>{console.log("Data fetching from Scheduler =====>>>>>.........");try{let e=new FormData;e.append("op","get_schedule_calendar_events"),e.append("project_id",i.toString()??"0"),e.append("for","dashboard_summary"),e.append("start_date_range","2024-9-01 00:00:00"),e.append("version","web"),e.append("from","panel"),e.append("iframe_call","0"),e.append("tz","+5:30"),e.append("tzid","Asia/Calcutta"),e.append("curr_time","2024-08-31 15:50:38"),e.append("force_login","0"),e.append("global_project",""),e.append("user_id",t.toString()??"0"),e.append("company_id",l.toString()??"0");let d=await b.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_schedule_calendar_events&c=${l?Number(l):0}&u=${t?Number(t):0}&p=manage_projects`,e);console.log("Data fetching Successfull from Scheduler  =====>>>>>",d?.data),g(d?.data?.data?.modules)}catch(e){console.log("Error fetching data:",e)}})()},[i,t,l]),(0,o.useEffect)(()=>((async()=>{let e=(await import("./dhtmlxscheduler.es-LUEABIOB.js")).default;if(a.current){e.config.header=["date","prev","today","next"],e.config.multi_day=!1,e.config.first_hour=0,e.config.last_hour=24,e.config.scale_width=0,e.config.readonly=!0,e.config.drag_resize=!1,e.config.drag_move=!1,e.xy.scale_width=0,e.config.left_border=!1;let d=()=>(typeof window<"u"&&window.innerWidth<768?(e.config.header=["prev","date","next"],e.xy.scale_width=40,e.templates.week_scale_date=function(r){return e.date.date_to_str("%D")(r)}):(e.config.header=["date","today","prev","next"],e.xy.scale_width=50,e.templates.week_scale_date=function(r){return e.date.date_to_str("%D, %F %j")(r)}),a.current&&e.updateView(),!0),m=new Date;e.init(a.current,m,"week"),e.parse(x),d(),e.attachEvent("onBeforeViewChange",d),e.attachEvent("onSchedulerResize",d),e.templates.event_class=function(r,n,c){return c.classname||""},e.ignore_week=function(r){if(r.getDay()===0||r.getDay()===6)return!0},e.templates.week_date=function(r){let n=e.date.add(r,6,"day"),c=u=>{let k=u.getDate()-1,y=u.toLocaleString("default",{month:"short"});return`${k} ${y}`};return`Sun, ${c(r)} ${r.getFullYear()} - Sat, ${c(n)} ${n.getFullYear()}`},window.addEventListener("resize",d)}})(),()=>{import("./dhtmlxscheduler.es-LUEABIOB.js").then(e=>e.default.clearAll())}),[x]),(0,h.jsxs)("div",{className:"w-full relative",children:[(0,h.jsx)("div",{className:"lg:absolute mt-4 lg:mt-0 lg:top-4 z-50 ",children:(0,h.jsx)(v,{icon:p,label:"Schedule",bgColor:"#ECF3FF",color:"#78AEFE"})}),(0,h.jsx)("div",{ref:a,style:{width:"100%",height:"100%"}})]})},q=A;export{q as default};
