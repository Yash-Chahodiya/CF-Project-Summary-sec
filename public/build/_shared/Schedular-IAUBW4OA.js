import{a as m}from"/build/_shared/chunk-K3LLJEF6.js";import{m as _}from"/build/_shared/chunk-OF7TX32X.js";import{a as h}from"/build/_shared/chunk-55XEO44C.js";import"/build/_shared/chunk-DGA7IYTA.js";import"/build/_shared/chunk-L4JQJ63A.js";import{a as b,b as g}from"/build/_shared/chunk-BVJBT3X3.js";import{d as s}from"/build/_shared/chunk-T36URGAI.js";var n=s(b(),1);var r=s(g(),1),x=({projectId:p,userId:o,compId:c})=>{let[f,y]=(0,n.useState)([]),d=(0,n.useRef)(null);return(0,n.useEffect)(()=>{(async()=>{console.log("Data fetching from Scheduler =====>>>>>.........");try{let e=new FormData;e.append("op","get_schedule_calendar_events"),e.append("project_id",p.toString()??"0"),e.append("for","dashboard_summary"),e.append("start_date_range","2024-9-01 00:00:00"),e.append("version","web"),e.append("from","panel"),e.append("iframe_call","0"),e.append("tz","+5:30"),e.append("tzid","Asia/Calcutta"),e.append("curr_time","2024-08-31 15:50:38"),e.append("force_login","0"),e.append("global_project",""),e.append("user_id",o.toString()??"0"),e.append("company_id",c.toString()??"0");let a=await m.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_schedule_calendar_events&c=${c?Number(c):0}&u=${o?Number(o):0}&p=manage_projects`,e);console.log("Data fetching Successfull from Scheduler  =====>>>>>",a?.data),y(a?.data?.data?.modules)}catch(e){console.log("Error fetching data:",e)}})()},[p,o,c]),(0,n.useEffect)(()=>((async()=>{let e=(await import("/build/_shared/dhtmlxscheduler.es-MI5VYV75.js")).default;if(d.current){e.config.header=["date","prev","today","next"],e.config.multi_day=!1,e.config.first_hour=0,e.config.last_hour=24,e.config.scale_width=0,e.config.readonly=!0,e.config.drag_resize=!1,e.config.drag_move=!1,e.xy.scale_width=0,e.config.left_border=!1;let a=()=>(typeof window<"u"&&window.innerWidth<768?(e.config.header=["prev","date","next"],e.xy.scale_width=40,e.templates.week_scale_date=function(t){return e.date.date_to_str("%D")(t)}):(e.config.header=["date","today","prev","next"],e.xy.scale_width=50,e.templates.week_scale_date=function(t){return e.date.date_to_str("%D, %F %j")(t)}),d.current&&e.updateView(),!0),D=new Date;e.init(d.current,D,"week"),e.parse(f),a(),e.attachEvent("onBeforeViewChange",a),e.attachEvent("onSchedulerResize",a),e.templates.event_class=function(t,l,i){return i.classname||""},e.ignore_week=function(t){if(t.getDay()===0||t.getDay()===6)return!0},e.templates.week_date=function(t){let l=e.date.add(t,6,"day"),i=u=>{let v=u.getDate()-1,S=u.toLocaleString("default",{month:"short"});return`${v} ${S}`};return`Sun, ${i(t)} ${t.getFullYear()} - Sat, ${i(l)} ${l.getFullYear()}`},window.addEventListener("resize",a)}})(),()=>{import("/build/_shared/dhtmlxscheduler.es-MI5VYV75.js").then(e=>e.default.clearAll())}),[f]),(0,r.jsxs)("div",{className:"w-full relative",children:[(0,r.jsx)("div",{className:"lg:absolute mt-4 lg:mt-0 lg:top-4 z-50 ",children:(0,r.jsx)(h,{icon:_,label:"Schedule",bgColor:"#ECF3FF",color:"#78AEFE"})}),(0,r.jsx)("div",{ref:d,style:{width:"100%",height:"100%"}})]})},j=x;export{j as default};
