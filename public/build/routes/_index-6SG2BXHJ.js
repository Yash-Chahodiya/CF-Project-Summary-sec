import{a as y}from"/build/_shared/chunk-K3LLJEF6.js";import{a as v,b as _}from"/build/_shared/chunk-BVJBT3X3.js";import{d}from"/build/_shared/chunk-T36URGAI.js";var t=d(v(),1);var c=d(v(),1);function S(o,n,r){let[s,l]=(0,c.useState)(null),[g,i]=(0,c.useState)(!0),[m,p]=(0,c.useState)("");return(0,c.useEffect)(()=>{async function u(){try{i(!0),p(""),console.log("Fetching data...");let a=new FormData;a.append("op","get_project_detail"),a.append("project_id",o.toString()),a.append("is_refresh","0"),a.append("record_type","project"),a.append("version","web"),a.append("from","panel"),a.append("iframe_call","0"),a.append("tz","+5:30"),a.append("tzid","Asia/Calcutta"),a.append("curr_time",new Date().toISOString()),a.append("force_login","0"),a.append("global_project",""),a.append("user_id",n.toString()),a.append("company_id",r.toString());let f=await y.post(`https://api-cfdev.contractorforeman.net/service.php?opp=get_project_detail&c=${Number(r)??0}&u=${Number(n)??0}&p=manage_projects`,a);console.log("Data fetched successfully",f?.data);let h=f?.data?.data;l(h),i(!1)}catch(a){console.error("Error fetching data:",a),p("Failed to load data. Please try again."),i(!1)}finally{i(!1)}}u()},[o,n,r]),{data:s,isLoading:g,error:m}}var e=d(_(),1),P=(0,t.lazy)(()=>import("/build/_shared/ProjectSummary-WRBD6YN2.js")),x=(0,t.lazy)(()=>import("/build/_shared/Invoiced-A63EN7RZ.js")),j=(0,t.lazy)(()=>import("/build/_shared/ActionItems-E4RYZFRP.js")),w=(0,t.lazy)(()=>import("/build/_shared/SummaryPercentages-LDEBNWTZ.js")),D=(0,t.lazy)(()=>import("/build/_shared/WorkInprogress-JIF3CB2N.js")),k=(0,t.lazy)(()=>import("/build/_shared/RecentPhtotos-FZ7LQH3N.js")),L=(0,t.lazy)(()=>import("/build/_shared/Schedular-IAUBW4OA.js")),N=(0,t.lazy)(()=>import("/build/_shared/Top-4F6IOXKS.js")),I=()=>[{title:"Project Dashboard"},{name:"description",content:"Project management dashboard"}];function b({projectId:o,userId:n,compId:r}){let{data:s,isLoading:l,error:g}=S(o,n,r);if(console.log("projectID =======>>>>>>>>",o),console.log("userId =======>>>>>>>>",n),console.log("COMPiD =======>>>>>>>>",r),console.log("Loading =======>>>>>>>>",l),!s)return;let{project_summary:i,wip_widget:m,customer_additional_contacts:p,billing_vs_actual:u}=s,a="bg-white border rounded-md hover:shadow-lg transition-shadow duration-500";return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"space-y-4 p-4 overflow-y-auto sidebar",children:[(0,e.jsx)("div",{className:"w-full",children:(0,e.jsx)(t.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Project topbar..."}),children:(0,e.jsx)(N,{data:u})})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-3",children:[(0,e.jsx)("div",{className:`${a} p-4`,children:(0,e.jsx)(t.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Project Summary..."}),children:(0,e.jsx)(P,{data:i})})}),(0,e.jsx)("div",{className:`${a} px-4 pt-4`,children:(0,e.jsx)(t.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Summary Percentages..."}),children:(0,e.jsx)(w,{data:s})})}),(0,e.jsx)("div",{className:`${a} px-4 pt-4`,children:(0,e.jsx)(t.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Action Items..."}),children:(0,e.jsx)(j,{projectId:o,userId:n,compId:r})})}),(0,e.jsx)("div",{children:(0,e.jsx)(t.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Invoiced..."}),children:(0,e.jsx)(x,{data:s,customer_additional_contacts:p})})}),(0,e.jsx)("div",{className:`${a} px-4 pb-2 lg:pt-4`,children:(0,e.jsx)(t.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Work In Progress..."}),children:(0,e.jsx)(D,{data:m})})}),(0,e.jsx)("div",{className:`${a} p-4`,children:(0,e.jsx)(t.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Recent Photos..."}),children:(0,e.jsx)(k,{data:s})})})]}),(0,e.jsx)("div",{className:`${a} px-4 h-60`,children:(0,e.jsx)(t.Suspense,{fallback:(0,e.jsx)("p",{children:"Loading Scheduler..."}),children:(0,e.jsx)(L,{projectId:o,userId:n,compId:r})})})]},o)})}export{b as default,I as meta};
